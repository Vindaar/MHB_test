{{/*
Returns a dictionary of of all courses (the key) found in the given module
with all fields of that module stored as a slice (the values of each key).

The first element of each slice is always the current index, which is just
a counter (+ 1) to enumerate the courses in the module.
*/}}

{{ $result := dict }}
{{ $map := .Map }}
{{ range $idx, $course := $map.CourseList }}
  {{/* Add the "Nr." field manually */}}
  {{ $row := slice }}
  {{ $row = $row | append (add $idx 1) }}
  {{ range $el := $.Fields }}
    {{ $courseMap := (index $map.Courses $course) }}
    {{ $row = $row | append (index $courseMap $el) }}
  {{ end }}
  {{ $rowDict := dict $course $row }}
  {{ $result = merge $result $rowDict }}
{{ end }}
{{ return $result }}
